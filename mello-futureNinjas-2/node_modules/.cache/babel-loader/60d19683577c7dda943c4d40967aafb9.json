{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/alexandregessone/Desktop/GitHub-Pessoal/Future-ninjas/Future-Ninjas/mello-futureNinjas-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _toConsumableArray from\"/Users/alexandregessone/Desktop/GitHub-Pessoal/Future-ninjas/Future-Ninjas/mello-futureNinjas-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/alexandregessone/Desktop/GitHub-Pessoal/Future-ninjas/Future-Ninjas/mello-futureNinjas-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alexandregessone/Desktop/GitHub-Pessoal/Future-ninjas/Future-Ninjas/mello-futureNinjas-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/alexandregessone/Desktop/GitHub-Pessoal/Future-ninjas/Future-Ninjas/mello-futureNinjas-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/alexandregessone/Desktop/GitHub-Pessoal/Future-ninjas/Future-Ninjas/mello-futureNinjas-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{Container,Filters,JobCart,FabSetter,ServiceCard,PaymentOption,CartCards}from'./styles';import CardContent from'@material-ui/core/CardContent';import Typography from'@material-ui/core/Typography';import{Fab,NativeSelect}from'@material-ui/core';import{parseISO,format}from'date-fns';import{ptBR}from'date-fns/locale';window.__localeId__='ptBR';var locales={ptBR:ptBR};var ServicesContainer=/*#__PURE__*/function(_React$Component){_inherits(ServicesContainer,_React$Component);var _super=_createSuper(ServicesContainer);function ServicesContainer(props){var _this;_classCallCheck(this,ServicesContainer);_this=_super.call(this,props);_this.newMethod=function(){var searchParam=new RegExp(_this.props.searchByTitle,'gi');return searchParam;};_this.sortItemsbyValue=function(e){if(e.target.value==='crescente'){_this.setState({jobs:_toConsumableArray(_this.state.jobs).sort(function(a,b){return a.value-b.value;})});}else if(e.target.value==='decrescente'){_this.setState({jobs:_toConsumableArray(_this.state.jobs).sort(function(a,b){return b.value-a.value;})});}};_this.sortItemsbyTitle=function(e){if(e.target.value==='crescente'){_this.setState({jobs:_toConsumableArray(_this.state.jobs).sort(function(a,b){if(a.title.toLowerCase()<b.title.toLowerCase()){return-1;}if(a.title.toLowerCase()>b.title.toLowerCase()){return 1;}return 0;})});}else if(e.target.value==='decrescente'){_this.setState({jobs:_toConsumableArray(_this.state.jobs).sort(function(a,b){if(a.title.toLowerCase()<b.title.toLowerCase()){return 1;}if(a.title.toLowerCase()>b.title.toLowerCase()){return-1;}return 0;})});}};_this.sortItemsbyDueDate=function(e){if(e.target.value==='crescente'){_this.setState({jobs:_toConsumableArray(_this.state.jobs).sort(function(a,b){if(Date.parse(a.dueDate)<Date.parse(b.dueDate)){return-1;}if(Date.parse(a.dueDate)>Date.parse(b.dueDate)){return 1;}return 0;})});}else if(e.target.value==='decrescente'){_this.setState({jobs:_toConsumableArray(_this.state.jobs).sort(function(a,b){if(Date.parse(a.dueDate)<Date.parse(b.dueDate)){return 1;}if(Date.parse(a.dueDate)>Date.parse(b.dueDate)){return-1;}return 0;})});}};_this.handleGiveUpJob=function(id){axios.put(\"https://us-central1-labenu-apis.cloudfunctions.net/futureNinjasTwo/jobs/\".concat(id,\"/giveup\"));console.log(_this.state.takenJobs);var searchInTakenJobs=_this.state.takenJobs.findIndex(function(item){return item.id===id;});if(searchInTakenJobs===-1){return;}else{_this.state.takenJobs.splice(searchInTakenJobs,1);_this.setState({takenJobs:_toConsumableArray(_this.state.takenJobs)});}};_this.takeAllJobs=function(){var _iterator=_createForOfIteratorHelper(_this.state.takenJobs),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var items=_step.value;axios.delete(\"https://us-central1-labenu-apis.cloudfunctions.net/futureNinjasTwo/jobs/\".concat(items.id));}}catch(err){_iterator.e(err);}finally{_iterator.f();}_this.state.takenJobs.length>1?alert('Você pegou esses trabalhos, entre em contato com os clientes'):alert('Você pegou esse trabalho, entre em contato com o cliente');_this.setState({takenJobs:[]});setTimeout(function(){return window.location.reload();},3000);};_this.state={jobs:[],takenJobs:[],show:false};return _this;}_createClass(ServicesContainer,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('https://us-central1-labenu-apis.cloudfunctions.net/futureNinjasTwo/jobs').then(function(response){_this2.setState({jobs:response.data.jobs.map(function(item){return item;})});});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){axios.get('https://us-central1-labenu-apis.cloudfunctions.net/futureNinjasTwo/jobs');}},{key:\"handleTakeJob\",value:function handleTakeJob(id){axios.put(\"https://us-central1-labenu-apis.cloudfunctions.net/futureNinjasTwo/jobs/\".concat(id,\"/giveup\"));var searchInJobs=this.state.jobs.findIndex(function(item){return item.id===id;});var searchInTakenJobs=this.state.takenJobs.findIndex(function(item){return item.id===id;});if(searchInTakenJobs===-1){this.setState({takenJobs:[].concat(_toConsumableArray(this.state.takenJobs),[this.state.jobs[searchInJobs]])});}else{return;}}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Filters,null,/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\"},\"Ordene por valor\"),/*#__PURE__*/React.createElement(NativeSelect,{onChange:this.sortItemsbyValue,name:\"\"},/*#__PURE__*/React.createElement(\"option\",{value:\"0\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"crescente\"},\"Ordem de valor crescente\"),/*#__PURE__*/React.createElement(\"option\",{value:\"decrescente\"},\"Ordem de valor decrescente\"))),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\"},\"Ordene por prazo\"),/*#__PURE__*/React.createElement(NativeSelect,{onChange:this.sortItemsbyDueDate,name:\"\"},/*#__PURE__*/React.createElement(\"option\",{value:\"0\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"crescente\"},\"Mais pr\\xF3ximos\"),/*#__PURE__*/React.createElement(\"option\",{value:\"decrescente\"},\"Mais distantes\"))),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\"},\"Ordene por T\\xEDtulo\"),/*#__PURE__*/React.createElement(NativeSelect,{onChange:this.sortItemsbyTitle,name:\"\",id:\"\"},/*#__PURE__*/React.createElement(\"option\",{value:\"0\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"crescente\"},\"A-Z\"),/*#__PURE__*/React.createElement(\"option\",{value:\"decrescente\"},\"Z-A\")))),/*#__PURE__*/React.createElement(FabSetter,null,/*#__PURE__*/React.createElement(\"i\",null,this.state.takenJobs.length),/*#__PURE__*/React.createElement(Fab,{variant:\"extended\",onClick:function onClick(){return _this3.setState({show:!_this3.state.show});}},\"Seus trabalhos\")),/*#__PURE__*/React.createElement(JobCart,{style:{display:this.state.show===true?'block':'none'}},/*#__PURE__*/React.createElement(\"div\",null,this.state.takenJobs.map(function(item){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CartCards,null,/*#__PURE__*/React.createElement(\"p\",null,item.title),/*#__PURE__*/React.createElement(\"p\",null,\"Prazo:\",' ',Number(new Date(item.dueDate).getDate())+'/'+(Number(new Date(item.dueDate).getMonth())+1<10?'0':'')+(Number(new Date(item.dueDate).getMonth())+1)+'/'+new Date(item.dueDate).getFullYear()),/*#__PURE__*/React.createElement(\"p\",null,\"Pagamento: R$\",item.value),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return _this3.handleGiveUpJob(item.id);}},\"Excluir\")));})),/*#__PURE__*/React.createElement(\"button\",{onClick:this.takeAllJobs},this.state.takenJobs.length>1?'ACEITAR TRABALHOS':'ACEITAR TRABALHO')),/*#__PURE__*/React.createElement(Container,null,this.state.jobs.map(function(item){if(item.title.match(_this3.newMethod())&&item.value<=_this3.props.valMax&&item.value>=_this3.props.valMin){return/*#__PURE__*/React.createElement(ServiceCard,{style:{wordBreak:'break-all'},key:item.id},/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(\"h3\",null,item.title),/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",component:\"p\"},\"R$ \",item.value),/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",component:\"p\"},item.description),/*#__PURE__*/React.createElement(\"p\",null,\"Prazo final:\",' ',format(parseISO(item.dueDate),\"'Dia' dd 'de' MMMM 'de' yyyy'\",{locale:locales[window.__localeId__]})),/*#__PURE__*/React.createElement(\"p\",null,\"M\\xE9todos de pagamento:\"),item.paymentMethods.map(function(paymentMethod){return/*#__PURE__*/React.createElement(PaymentOption,null,paymentMethod);}),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"button\",{variant:\"outlined\",color:\"primary\",onClick:function onClick(){return _this3.handleTakeJob(item.id);}},\"PEGAR TRABALHO\"))));}})));}}]);return ServicesContainer;}(React.Component);export{ServicesContainer as default};","map":{"version":3,"sources":["/Users/alexandregessone/Desktop/GitHub-Pessoal/Future-ninjas/Future-Ninjas/mello-futureNinjas-2/src/components/ContainerServiços/containerservicos.js"],"names":["React","axios","Container","Filters","JobCart","FabSetter","ServiceCard","PaymentOption","CartCards","CardContent","Typography","Fab","NativeSelect","parseISO","format","ptBR","window","__localeId__","locales","ServicesContainer","props","newMethod","searchParam","RegExp","searchByTitle","sortItemsbyValue","e","target","value","setState","jobs","state","sort","a","b","sortItemsbyTitle","title","toLowerCase","sortItemsbyDueDate","Date","parse","dueDate","handleGiveUpJob","id","put","console","log","takenJobs","searchInTakenJobs","findIndex","item","splice","takeAllJobs","items","delete","length","alert","setTimeout","location","reload","show","get","then","response","data","map","searchInJobs","display","Number","getDate","getMonth","getFullYear","match","valMax","valMin","wordBreak","description","locale","paymentMethods","paymentMethod","handleTakeJob","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport {\n    Container,\n    Filters,\n    JobCart,\n    FabSetter,\n    ServiceCard,\n    PaymentOption,\n    CartCards,\n} from './styles';\n\nimport CardContent from '@material-ui/core/CardContent';\n\nimport Typography from '@material-ui/core/Typography';\nimport { Fab, NativeSelect } from '@material-ui/core';\nimport { parseISO, format } from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\n\nwindow.__localeId__ = 'ptBR'\nconst locales = { ptBR };\n\nexport default class ServicesContainer extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            jobs: [],\n            takenJobs: [],\n            show: false,\n        };\n    }\n\n    componentDidMount() {\n        axios\n            .get(\n                'https://us-central1-labenu-apis.cloudfunctions.net/futureNinjasTwo/jobs'\n            )\n            .then((response) => {\n                this.setState({\n                    jobs: response.data.jobs.map((item) => item),\n                });\n            });\n    }\n\n    componentDidUpdate() {\n        axios.get(\n            'https://us-central1-labenu-apis.cloudfunctions.net/futureNinjasTwo/jobs'\n        );\n    }\n\n    newMethod = () => {\n        const searchParam = new RegExp(this.props.searchByTitle, 'gi');\n        return searchParam;\n    };\n\n    sortItemsbyValue = (e) => {\n        if (e.target.value === 'crescente') {\n            this.setState({\n                jobs: [...this.state.jobs].sort((a, b) => a.value - b.value),\n            });\n        } else if (e.target.value === 'decrescente') {\n            this.setState({\n                jobs: [...this.state.jobs].sort((a, b) => b.value - a.value),\n            });\n        }\n    };\n\n    sortItemsbyTitle = (e) => {\n        if (e.target.value === 'crescente') {\n            this.setState({\n                jobs: [...this.state.jobs].sort(function (a, b) {\n                    if (a.title.toLowerCase() < b.title.toLowerCase()) {\n                        return -1;\n                    }\n                    if (a.title.toLowerCase() > b.title.toLowerCase()) {\n                        return 1;\n                    }\n                    return 0;\n                }),\n            });\n        } else if (e.target.value === 'decrescente') {\n            this.setState({\n                jobs: [...this.state.jobs].sort(function (a, b) {\n                    if (a.title.toLowerCase() < b.title.toLowerCase()) {\n                        return 1;\n                    }\n                    if (a.title.toLowerCase() > b.title.toLowerCase()) {\n                        return -1;\n                    }\n                    return 0;\n                }),\n            });\n        }\n    };\n\n    sortItemsbyDueDate = (e) => {\n        if (e.target.value === 'crescente') {\n            this.setState({\n                jobs: [...this.state.jobs].sort(function (a, b) {\n                    if (Date.parse(a.dueDate) < Date.parse(b.dueDate)) {\n                        return -1;\n                    }\n                    if (Date.parse(a.dueDate) > Date.parse(b.dueDate)) {\n                        return 1;\n                    }\n                    return 0;\n                }),\n            });\n        } else if (e.target.value === 'decrescente') {\n            this.setState({\n                jobs: [...this.state.jobs].sort(function (a, b) {\n                    if (Date.parse(a.dueDate) < Date.parse(b.dueDate)) {\n                        return 1;\n                    }\n                    if (Date.parse(a.dueDate) > Date.parse(b.dueDate)) {\n                        return -1;\n                    }\n                    return 0;\n                }),\n            });\n        }\n    };\n\n    handleTakeJob(id) {\n        axios.put(\n            `https://us-central1-labenu-apis.cloudfunctions.net/futureNinjasTwo/jobs/${id}/giveup`\n        );\n\n        const searchInJobs = this.state.jobs.findIndex(\n            (item) => item.id === id\n        );\n\n        const searchInTakenJobs = this.state.takenJobs.findIndex(\n            (item) => item.id === id\n        );\n\n        if (searchInTakenJobs === -1) {\n            this.setState({\n                takenJobs: [\n                    ...this.state.takenJobs,\n                    this.state.jobs[searchInJobs],\n                ],\n            });\n        } else {\n            return;\n        }\n    }\n\n    handleGiveUpJob = (id) => {\n        axios.put(\n            `https://us-central1-labenu-apis.cloudfunctions.net/futureNinjasTwo/jobs/${id}/giveup`\n        );\n\n        console.log(this.state.takenJobs);\n\n        const searchInTakenJobs = this.state.takenJobs.findIndex(\n            (item) => item.id === id\n        );\n\n        if (searchInTakenJobs === -1) {\n            return;\n        } else {\n            this.state.takenJobs.splice(searchInTakenJobs, 1);\n            this.setState({ takenJobs: [...this.state.takenJobs] });\n        }\n    };\n\n    takeAllJobs = () => {\n        for (let items of this.state.takenJobs) {\n            axios.delete(\n                `https://us-central1-labenu-apis.cloudfunctions.net/futureNinjasTwo/jobs/${items.id}`\n            );\n        }\n        this.state.takenJobs.length > 1\n            ? alert(\n                  'Você pegou esses trabalhos, entre em contato com os clientes'\n              )\n            : alert('Você pegou esse trabalho, entre em contato com o cliente');\n        this.setState({ takenJobs: [] });\n\n        setTimeout(() => window.location.reload(), 3000);\n    };\n\n    render() {\n        return (\n            <>\n                <Filters>\n                    <span>\n                        <label htmlFor=\"\">Ordene por valor</label>\n                        <NativeSelect onChange={this.sortItemsbyValue} name=\"\">\n                            <option value=\"0\"></option>\n                            <option value=\"crescente\">\n                                Ordem de valor crescente\n                            </option>\n                            <option value=\"decrescente\">\n                                Ordem de valor decrescente\n                            </option>\n                        </NativeSelect>\n                    </span>\n\n                    <span>\n                        <label htmlFor=\"\">Ordene por prazo</label>\n                        <NativeSelect\n                            onChange={this.sortItemsbyDueDate}\n                            name=\"\"\n                        >\n                            <option value=\"0\"></option>\n                            <option value=\"crescente\">Mais próximos</option>\n                            <option value=\"decrescente\">Mais distantes</option>\n                        </NativeSelect>\n                    </span>\n                    <span>\n                        <label htmlFor=\"\">Ordene por Título</label>\n                        <NativeSelect\n                            onChange={this.sortItemsbyTitle}\n                            name=\"\"\n                            id=\"\"\n                        >\n                            <option value=\"0\"></option>\n                            <option value=\"crescente\">A-Z</option>\n                            <option value=\"decrescente\">Z-A</option>\n                        </NativeSelect>\n                    </span>\n                </Filters>\n                <FabSetter>\n                    <i>{this.state.takenJobs.length}</i>\n                    <Fab\n                        variant=\"extended\"\n                        onClick={() =>\n                            this.setState({ show: !this.state.show })\n                        }\n                    >\n                        Seus trabalhos\n                    </Fab>\n                </FabSetter>\n                <JobCart\n                    style={{\n                        display: this.state.show === true ? 'block' : 'none',\n                    }}\n                >\n                    <div>\n                        {this.state.takenJobs.map((item) => (\n                            <>\n                                <CartCards>\n                                    <p>{item.title}</p>\n                                    <p>\n                                        Prazo:{' '}\n                                        {Number(\n                                            new Date(item.dueDate).getDate()\n                                        ) +\n                                            '/' +\n                                            (Number(\n                                                new Date(\n                                                    item.dueDate\n                                                ).getMonth()\n                                            ) +\n                                                1 <\n                                            10\n                                                ? '0'\n                                                : '') +\n                                            (Number(\n                                                new Date(\n                                                    item.dueDate\n                                                ).getMonth()\n                                            ) +\n                                                1) +\n                                            '/' +\n                                            new Date(\n                                                item.dueDate\n                                            ).getFullYear()}\n                                    </p>\n                                    <p>Pagamento: R${item.value}</p>\n                                    <button\n                                        onClick={() =>\n                                            this.handleGiveUpJob(item.id)\n                                        }\n                                    >\n                                        Excluir\n                                    </button>\n                                </CartCards>\n                            </>\n                        ))}\n                    </div>\n                    <button onClick={this.takeAllJobs}>\n                        {this.state.takenJobs.length > 1\n                            ? 'ACEITAR TRABALHOS'\n                            : 'ACEITAR TRABALHO'}\n                    </button>\n                </JobCart>\n                <Container>\n                    {this.state.jobs.map((item) => {\n                        if (\n                            item.title.match(this.newMethod()) &&\n                            item.value <= this.props.valMax &&\n                            item.value >= this.props.valMin\n                        ) {\n                            return (\n                                <ServiceCard\n                                    style={{\n                                        wordBreak: 'break-all',\n                                    }}\n                                    key={item.id}\n                                >\n                                    <CardContent>\n                                        <h3>{item.title}</h3>\n                                        <Typography\n                                            variant=\"body2\"\n                                            component=\"p\"\n                                        >\n                                            R$ {item.value}\n                                        </Typography>\n                                        <Typography\n                                            variant=\"body2\"\n                                            component=\"p\"\n                                        >\n                                            {item.description}\n                                        </Typography>\n                                        <p>\n                                            Prazo final:{' '}\n                                            {format(\n                                                parseISO(item.dueDate),\n                                                \"'Dia' dd 'de' MMMM 'de' yyyy'\",\n                                                {\n                                                    locale:\n                                                        locales[\n                                                            window.__localeId__\n                                                        ],\n                                                }\n                                            )}\n                                        </p>\n                                        <p>Métodos de pagamento:</p>\n                                        {item.paymentMethods.map(\n                                            (paymentMethod) => (\n                                                <PaymentOption>\n                                                    {paymentMethod}\n                                                </PaymentOption>\n                                            )\n                                        )}\n\n                                        <span>\n                                            <button\n                                                variant=\"outlined\"\n                                                color=\"primary\"\n                                                onClick={() =>\n                                                    this.handleTakeJob(item.id)\n                                                }\n                                            >\n                                                PEGAR TRABALHO\n                                            </button>\n                                        </span>\n                                    </CardContent>\n                                </ServiceCard>\n                            );\n                        }\n                    })}\n                </Container>\n            </>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}